<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Manager - Bezpieczne przechowywanie haseł</title>
    <meta name="description" content="Menedżer haseł z lokalnym szyfrowaniem - Twoje hasła zawsze bezpieczne">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Authentication View -->
    <div id="auth-view" class="view active">
        <div class="auth-container">
            <div class="auth-card">
                <div class="logo">
                    <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                        <rect x="8" y="20" width="32" height="20" rx="4" stroke="url(#grad)" stroke-width="3" />
                        <circle cx="24" cy="30" r="3" fill="url(#grad)" />
                        <path d="M16 20V14C16 9.58172 19.5817 6 24 6C28.4183 6 32 9.58172 32 14V20" stroke="url(#grad)"
                            stroke-width="3" stroke-linecap="round" />
                        <defs>
                            <linearGradient id="grad" x1="8" y1="6" x2="40" y2="40" gradientUnits="userSpaceOnUse">
                                <stop stop-color="#667eea" />
                                <stop offset="1" stop-color="#764ba2" />
                            </linearGradient>
                        </defs>
                    </svg>
                    <h1>Password Manager</h1>
                </div>
                <p class="subtitle">Bezpieczne przechowywanie haseł z szyfrowaniem lokalnym</p>

                <!-- Login Form -->
                <form id="login-form" class="auth-form">
                    <h2>Zaloguj się</h2>
                    <div class="form-group">
                        <label for="login-email">Adres e-mail</label>
                        <input type="email" id="login-email" required autocomplete="email">
                    </div>
                    <div class="form-group">
                        <label for="login-password">Hasło główne</label>
                        <input type="password" id="login-password" required autocomplete="current-password">
                    </div>
                    <button type="submit" class="btn btn-primary">Zaloguj się</button>
                    <p class="form-switch">
                        Nie masz konta? <a href="#" id="show-register">Zarejestruj się</a>
                    </p>
                </form>

                <!-- Register Form -->
                <form id="register-form" class="auth-form hidden">
                    <h2>Utwórz konto</h2>
                    <div class="form-group">
                        <label for="register-email">Adres e-mail</label>
                        <input type="email" id="register-email" required autocomplete="email">
                    </div>
                    <div class="form-group">
                        <label for="register-password">Hasło główne</label>
                        <input type="password" id="register-password" required autocomplete="new-password">
                        <small class="form-hint">Hasło główne służy do szyfrowania Twoich danych. Nie będzie możliwe
                            odzyskanie danych bez tego hasła!</small>
                    </div>
                    <div class="form-group">
                        <label for="register-password-confirm">Potwierdź hasło</label>
                        <input type="password" id="register-password-confirm" required autocomplete="new-password">
                    </div>
                    <button type="submit" class="btn btn-primary">Zarejestruj się</button>
                    <p class="form-switch">
                        Masz już konto? <a href="#" id="show-login">Zaloguj się</a>
                    </p>
                </form>

                <div class="security-notice">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                        <path
                            d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z" />
                    </svg>
                    <span>Szyfrowanie zero-knowledge: Twoje hasła są szyfrowane lokalnie w przeglądarce</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Dashboard View -->
    <div id="dashboard-view" class="view">
        <nav class="navbar">
            <div class="nav-left">
                <svg width="32" height="32" viewBox="0 0 48 48" fill="none">
                    <rect x="8" y="20" width="32" height="20" rx="4" stroke="url(#grad2)" stroke-width="2.5" />
                    <circle cx="24" cy="30" r="2.5" fill="url(#grad2)" />
                    <path d="M16 20V14C16 9.58172 19.5817 6 24 6C28.4183 6 32 9.58172 32 14V20" stroke="url(#grad2)"
                        stroke-width="2.5" stroke-linecap="round" />
                    <defs>
                        <linearGradient id="grad2" x1="8" y1="6" x2="40" y2="40" gradientUnits="userSpaceOnUse">
                            <stop stop-color="#667eea" />
                            <stop offset="1" stop-color="#764ba2" />
                        </linearGradient>
                    </defs>
                </svg>
                <h1>Password Manager</h1>
                <div class="security-info-wrapper">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round" class="info-icon">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="16" x2="12" y2="12"></line>
                        <line x1="12" y1="8" x2="12.01" y2="8"></line>
                    </svg>
                    <div class="security-tooltip">
                        <div class="tooltip-header">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#10b981"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                            </svg>
                            <span>Bezpieczeństwo Gwarantowane</span>
                        </div>
                        <p>Twoje hasła są szyfrowane <strong>lokalnie na Twoim urządzeniu</strong> przed wysłaniem.
                            Serwer nigdy nie widzi Twoich haseł ani klucza szyfrującego.</p>
                        <div class="tooltip-footer">Zero-Knowledge Architecture</div>
                    </div>
                </div>
            </div>
            <div class="nav-right">
                <span id="user-email" class="user-email"></span>
                <button id="logout-btn" class="btn btn-secondary">Wyloguj</button>
            </div>
        </nav>

        <main class="container">
            <div class="dashboard-header">
                <h2>Twoje hasła</h2>
                <div class="header-actions">
                    <input type="text" id="search-input" placeholder="Szukaj..." class="search-input">
                    <button id="add-password-btn" class="btn btn-primary">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path
                                d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" />
                        </svg>
                        Dodaj hasło
                    </button>
                </div>
            </div>

            <div id="passwords-list" class="passwords-grid">
                <!-- Password cards will be inserted here -->
            </div>

            <div id="empty-state" class="empty-state hidden">
                <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
                    <circle cx="32" cy="32" r="30" stroke="currentColor" stroke-width="2" stroke-dasharray="4 4"
                        opacity="0.3" />
                    <path d="M32 20v24M20 32h24" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                </svg>
                <h3>Brak zapisanych haseł</h3>
                <p>Kliknij "Dodaj hasło" aby dodać swoje pierwsze hasło</p>
            </div>
        </main>
    </div>

    <!-- Add/Edit Password Modal -->
    <div id="password-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">Dodaj hasło</h2>
                <button id="close-modal" class="close-btn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <form id="password-form">
                <div class="form-group">
                    <label for="password-service">Nazwa serwisu</label>
                    <input type="text" id="password-service" required placeholder="np. Facebook, Gmail">
                </div>
                <div class="form-group">
                    <label for="password-username">Login/Email</label>
                    <input type="text" id="password-username" required placeholder="Twój login lub email">
                </div>
                <div class="form-group">
                    <label for="password-password">Hasło</label>
                    <div class="password-input-group">
                        <input type="password" id="password-password" required>
                        <button type="button" id="toggle-password-visibility" class="icon-btn">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M10 12a2 2 0 100-4 2 2 0 000 4z" />
                                <path fill-rule="evenodd"
                                    d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z"
                                    clip-rule="evenodd" />
                            </svg>
                        </button>
                        <button type="button" id="generate-password-btn" class="icon-btn" title="Generuj hasło">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path
                                    d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" />
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="form-group">
                    <label for="password-notes">Notatki (opcjonalnie)</label>
                    <textarea id="password-notes" rows="3" placeholder="Dodatkowe informacje"></textarea>
                </div>
                <div class="modal-actions">
                    <button type="button" id="cancel-modal" class="btn btn-secondary">Anuluj</button>
                    <button type="submit" class="btn btn-primary">Zapisz</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Password Generator Modal -->
    <div id="generator-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Generator haseł</h2>
                <button id="close-generator" class="close-btn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="generator-content">
                <div class="generated-password-display">
                    <input type="text" id="generated-password" readonly>
                    <button id="copy-password" class="icon-btn" title="Kopiuj">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path
                                d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                    </button>
                </div>
                <div id="password-strength" class="password-strength">
                    <div class="strength-bar">
                        <div id="strength-fill" class="strength-fill"></div>
                    </div>
                    <span id="strength-text">Silne</span>
                </div>
                <div class="form-group">
                    <label for="password-length">Długość: <span id="length-value">16</span></label>
                    <input type="range" id="password-length" min="8" max="64" value="16" class="slider">
                </div>
                <div class="generator-options">
                    <label class="checkbox-label">
                        <input type="checkbox" id="include-uppercase" checked>
                        <span>Wielkie litery (A-Z)</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="include-lowercase" checked>
                        <span>Małe litery (a-z)</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="include-numbers" checked>
                        <span>Cyfry (0-9)</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="include-symbols" checked>
                        <span>Symbole (!@#$%^&*)</span>
                    </label>
                </div>
                <div class="modal-actions">
                    <button id="regenerate-password" class="btn btn-secondary">Generuj ponownie</button>
                    <button id="use-password" class="btn btn-primary">Użyj hasła</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="/js/crypto.js"></script>
    <script src="/js/auth.js"></script>
    <script src="/js/passwords.js"></script>
    <script src="/js/generator.js"></script>
    <script src="/js/app.js"></script>
</body>

</html>